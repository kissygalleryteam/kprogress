/*!build time : 2013-10-18 11:45:26 AM*/
KISSY.add("gallery/kprogress/1.0/index",function(a,b){"use strict";function c(){clearTimeout(e),e=setTimeout(function(){d+=Math.random()/160+.002,.99>d&&c(),g.set(d)},500*Math.random()+400)}var d,e,f=b.all,g=function(){var a=f('<div id="kprogress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="1"></div>'),b=document.documentElement.style,c="transform"in b?"":"WebkitTransform"in b?"-webkit-":"MozTransform"in b?"-moz-":"msTransform"in b?"-ms-":"OTransform"in b?"-o-":!1;if("string"==typeof c){a.css(c+"transform-style","preserve-3d");var d="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd ".split(" ").join(".kprogress-transitionend ");return{start:function(){this.set(0),a.detach(".kprogress-transitionend").css("opacity",1).css(c+"transition",c+"transform 1s ease, opacity 200ms linear").appendTo("body"),a[0].offsetWidth},set:function(b){a.attr("aria-valuenow",b).css(c+"transform","translateX("+(100*b-100)+"%)")},done:function(){a.css(c+"transition-duration","300ms, 200ms"),this.set(1),a.on(d,function(){a.detach(".kprogress-transitionend").on(d,function(){a.detach(".kprogress-transitionend").remove()}).css("opacity",0)})}}}return{start:function(){this.set(0),a.appendTo("body")},set:function(b){a.attr("aria-valuenow",b).css("margin-left",100*b-100+"%")},done:function(){this.set(1),a.remove()}}}(),h=!1,i={start:function(){h||(h=!0,g.start(),g.set(d=.1),c())},done:function(){h||g.start(),clearTimeout(e),d=0,g.done(),h=!1},move:function(a){if(h||(h=!0,g.start()),"number"==typeof a){if(a>=1)return i.done();a>d&&g.set(d=a)}else a=d+Math.random()/64+.02,.99>a&&g.set(d=a);c()}};return i},{requires:["node","./index.css"]});